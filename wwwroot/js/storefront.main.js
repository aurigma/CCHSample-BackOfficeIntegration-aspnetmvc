window.Aurigma=function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=140)}([function(e,t,n){"use strict";var s=n(7),r=Object.prototype.toString;function i(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function c(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===r.call(e)}function p(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:u,isStream:function(e){return c(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:p,merge:function e(){var t={};function n(n,s){a(t[s])&&a(n)?t[s]=e(t[s],n):a(n)?t[s]=e({},n):i(n)?t[s]=n.slice():t[s]=n}for(var s=0,r=arguments.length;s<r;s++)p(arguments[s],n);return t},extend:function(e,t,n){return p(t,(function(t,r){e[r]=n&&"function"==typeof t?s(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},,function(e,t,n){"use strict";var s,r,i;!function(e){e[e.Custom=0]="Custom",e[e.ShopifyLegacy=1]="ShopifyLegacy",e[e.DocketManager=2]="DocketManager",e[e.Auth0Saml=3]="Auth0Saml",e[e.NopCommerce=4]="NopCommerce",e[e.WooCommerce=5]="WooCommerce",e[e.Magento=6]="Magento",e[e.BigCommerce=7]="BigCommerce",e[e.Shopify=8]="Shopify"}(s||(s={})),function(e){e[e.UIFramework=0]="UIFramework",e[e.SimpleEditor=1]="SimpleEditor"}(r||(r={}));!function(e){e[e.Template=1]="Template",e[e.OptionBasedProduct=2]="OptionBasedProduct"}(i||(i={}));n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}))},function(e,t,n){e.exports=n(19)},function(e,t,n){"use strict";function s(e,t){return"string"==typeof e?r(e,t):Promise.all(e.map(e=>r(e.importData,e.url,e.isDefault)))}function r(e,t,n=!1){return new Promise((s,r)=>{const i="resolve_callback_"+Math.round(1e5*Math.random());window[i]=(...t)=>{delete window[i],document.head.removeChild(o);const n=Array.from(t);let r=e.split(",");r=r.map(e=>e.trim());const c=n.reduce((e,t,n)=>(e[r[n]]=t,e),{});s(c)};const o=document.createElement("script");o.type="module",o.onerror=e=>{console.error("Failer load script from "+t),console.error(e),r(e)},t+=(t.indexOf("?")>=0?"&":"?")+"t="+Date.now(),o.text=n?`import ${e} from '${t}'; ${i}(${e}.default || ${e} );`:`import { ${e} } from '${t}'; ${i}(${e});`,document.head.appendChild(o)})}n.d(t,"a",(function(){return s}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n(3),r=n.n(s);class i{constructor(e,t,n){this.apiUrl=null!=t?t:"https://customerscanvashub.com/",this.tenantId=e,this.ecommerceSystemId=null!=n?n:0,this.http=r.a.create({baseURL:null!=t?t:"https://customerscanvashub.com/",validateStatus:e=>e>=200&&e<300})}async getIntegrationInfo(e){const t=0==this.ecommerceSystemId?`/api/v1/tenants/${this.tenantId}/integrations/${e}`:`/api/v1/tenants/${this.tenantId}/integrations/${e}?storefrontId=${this.ecommerceSystemId}`,n=await this.http.get(t);return this.getDataFrom(n)}async getTemplateIntegrationInfo(e){const t=await this.http.get(`/api/v1/tenants/${this.tenantId}/integrations/template/${e}`);return this.getDataFrom(t)}async getOptionBasedProductIntegrationInfo(e,t){let n=`/api/v1/tenants/${this.tenantId}/integrations/option-based-product/${e}`;null!=t&&(n+="?productFilterId="+t);const s=await this.http.get(n);return this.getDataFrom(s)}async getToken(e,t){const n=await this.http.post(`/api/v1/tenants/${this.tenantId}/integrations/gettoken`,{userGuid:e,ecommerceDomain:t,origin:window.location.origin});return this.getDataFrom(n)}async getTokenAndUserId(e,t){const n={userGuid:e,ecommerceDomain:t,origin:window.location.origin,storefrontId:0==this.ecommerceSystemId?null:this.ecommerceSystemId.toString()},s=await this.http.post(`/api/v1/tenants/${this.tenantId}/integrations/getusertoken`,n);return this.getDataFrom(s)}async getCcToken(e,t){const n=await this.http.post(`/api/v1/tenants/${this.tenantId}/integrations/getcctoken`,{userGuid:e,ecommerceDomain:t,origin:window.location.origin});return this.getDataFrom(n)}async updateCcToken(e){await this.http.post(`/api/v1/tenants/${this.tenantId}/integrations/updatecctoken`,{userToken:e,origin:window.location.origin})}getAdditionalProducts(e,t,n){const s="https://customerscanvashub.com/"+`api/v1/tenants/${e}/integrations/GetAdditionalProducts`,r={origin:window.location.origin,ecommerceDomain:t,additionalProducts:n};return fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(e=>e.json()).then(e=>{if(e.success)return e.result;throw new Error(e.error)})}getDataFrom(e){if(!this.http.defaults.validateStatus(e.status)||!e.data.success)throw new Error(`HTTP ${e.status} ${e.statusText}. ${JSON.stringify(e.data)}`);return e.data.result}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return e.apply(t,n)}}},function(e,t,n){"use strict";var s=n(0);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(s.isURLSearchParams(t))i=t.toString();else{var o=[];s.forEach(t,(function(e,t){null!=e&&(s.isArray(e)?t+="[]":e=[e],s.forEach(e,(function(e){s.isDate(e)?e=e.toISOString():s.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))})))})),i=o.join("&")}if(i){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var s=n(0),r=n(25),i={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,a={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(c=n(11)),c),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e)?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],(function(e){a.headers[e]={}})),s.forEach(["post","put","patch"],(function(e){a.headers[e]=s.merge(i)})),e.exports=a}).call(this,n(24))},function(e,t,n){"use strict";var s=n(0),r=n(26),i=n(28),o=n(8),c=n(29),a=n(32),u=n(33),p=n(12);e.exports=function(e){return new Promise((function(t,n){var h=e.data,l=e.headers;s.isFormData(h)&&delete l["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";l.Authorization="Basic "+btoa(b+":"+f)}var g=c(e.baseURL,e.url);if(d.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:s,config:e,request:d};r(t,n,i),d=null}},d.onabort=function(){d&&(n(p("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){n(p("Network Error",e,null,d)),d=null},d.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(p(t,e,"ECONNABORTED",d)),d=null},s.isStandardBrowserEnv()){var m=(e.withCredentials||u(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;m&&(l[e.xsrfHeaderName]=m)}if("setRequestHeader"in d&&s.forEach(l,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete l[t]:d.setRequestHeader(t,e)})),s.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),n(e),d=null)})),h||(h=null),d.send(h)}))}},function(e,t,n){"use strict";var s=n(27);e.exports=function(e,t,n,r,i){var o=new Error(e);return s(o,t,n,r,i)}},function(e,t,n){"use strict";var s=n(0);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],c=["validateStatus"];function a(e,t){return s.isPlainObject(e)&&s.isPlainObject(t)?s.merge(e,t):s.isPlainObject(t)?s.merge({},t):s.isArray(t)?t.slice():t}function u(r){s.isUndefined(t[r])?s.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}s.forEach(r,(function(e){s.isUndefined(t[e])||(n[e]=a(void 0,t[e]))})),s.forEach(i,u),s.forEach(o,(function(r){s.isUndefined(t[r])?s.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])})),s.forEach(c,(function(s){s in t?n[s]=a(e[s],t[s]):s in e&&(n[s]=a(void 0,e[s]))}));var p=r.concat(i).concat(o).concat(c),h=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===p.indexOf(e)}));return s.forEach(h,u),n}},function(e,t,n){"use strict";function s(e){this.message=e}s.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},s.prototype.__CANCEL__=!0,e.exports=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s{constructor(e){this.getCookies=()=>{const e=this._doc.cookie;return e?e.split(";").reduce((e,t,n,s)=>{const r=t.split("=");if(2!==r.length)throw new Error("Each cookie should be an equal sign separated string.");return e[r[0].trim()]=r[1],e},{}):{}},this._doc=e}getLanguage(){const e=this._doc.querySelector("html").getAttribute("lang");return Boolean(e)?e.substr(0,2):"en"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n(3),r=n.n(s);class i{constructor({url:e,tenantId:t,http:n}){this.apiUrl=e,this.tenantId=t,this.http=null!=n?n:r.a}async warmUp(e,t,n){for(let s=0;s<e;s++){const r=await this.http.get(this.apiUrl+"/ping");switch(r.status){case 200:case 201:case 204:return!0;case 503:if(s<e-1){const e=new Promise(e=>setTimeout(e,1e3*t));Boolean(n)&&n(),await e}break;default:throw new Error(`Unexpected response from service: HTTP ${r.status} ${r.statusText}`)}}return!1}async post(e){return(await this.http.post(`${this.apiUrl}/tenants/${this.tenantId}/projects/create`,e,{headers:{"Content-Type":"application/json"}})).data}}},,,function(e,t,n){"use strict";var s=n(0),r=n(7),i=n(20),o=n(13);function c(e){var t=new i(e),n=r(i.prototype.request,t);return s.extend(n,i.prototype,t),s.extend(n,t),n}var a=c(n(10));a.Axios=i,a.create=function(e){return c(o(a.defaults,e))},a.Cancel=n(14),a.CancelToken=n(34),a.isCancel=n(9),a.all=function(e){return Promise.all(e)},a.spread=n(35),a.isAxiosError=n(36),e.exports=a,e.exports.default=a},function(e,t,n){"use strict";var s=n(0),r=n(8),i=n(21),o=n(22),c=n(13);function a(e){this.defaults=e,this.interceptors={request:new i,response:new i}}a.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},a.prototype.getUri=function(e){return e=c(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},s.forEach(["delete","get","head","options"],(function(e){a.prototype[e]=function(t,n){return this.request(c(n||{},{method:e,url:t,data:(n||{}).data}))}})),s.forEach(["post","put","patch"],(function(e){a.prototype[e]=function(t,n,s){return this.request(c(s||{},{method:e,url:t,data:n}))}})),e.exports=a},function(e,t,n){"use strict";var s=n(0);function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){s.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},function(e,t,n){"use strict";var s=n(0),r=n(23),i=n(9),o=n(10);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=s.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),s.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=r(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var s=n(0);e.exports=function(e,t,n){return s.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,s,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(e){s=o}}();var a,u=[],p=!1,h=-1;function l(){p&&a&&(p=!1,a.length?u=a.concat(u):h=-1,u.length&&d())}function d(){if(!p){var e=c(l);p=!0;for(var t=u.length;t;){for(a=u,u=[];++h<t;)a&&a[h].run();h=-1,t=u.length}a=null,p=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new b(e,t)),1!==u.length||p||c(d)},b.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";var s=n(0);e.exports=function(e,t){s.forEach(e,(function(n,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[s])}))}},function(e,t,n){"use strict";var s=n(12);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(s("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,s,r){return e.config=t,n&&(e.code=n),e.request=s,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var s=n(0);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var c=[];c.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),s.isString(r)&&c.push("path="+r),s.isString(i)&&c.push("domain="+i),!0===o&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var s=n(30),r=n(31);e.exports=function(e,t){return e&&!s(t)?r(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var s=n(0),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(s.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=s.trim(e.substr(0,i)).toLowerCase(),n=s.trim(e.substr(i+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},function(e,t,n){"use strict";var s=n(0);e.exports=s.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var s=e;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=s.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var s=n(14);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new s(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},,,,,function(e,t,n){"use strict";function s(){var e;let t=(new Date).getTime(),n=null!==(e=performance&&performance.now&&1e3*performance.now())&&void 0!==e?e:0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{var s=16*Math.random();return t>0?(s=(t+s)%16|0,t=Math.floor(t/16)):(s=(n+s)%16|0,n=Math.floor(n/16)),("x"===e?s:3&s|8).toString(16)})}function r(e){return e.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i)}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}))},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0;const s=n(62);Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}});const r=n(63);Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return r.DispatchError}});const i=n(64);Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return i.DispatcherWrapper}});const o=n(65);Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return o.EventListBase}});const c=n(66);Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return c.EventManagement}});const a=n(67);Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return a.HandlingBase}});const u=n(68);Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return u.PromiseDispatcherBase}});const p=n(69);Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return p.PromiseSubscription}});const h=n(70);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return h.Subscription}});const l=n(71);Object.defineProperty(t,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return l.SubscriptionChangeEventDispatcher}})},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0;const s=n(73);Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}});const r=n(74);Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return r.DispatchError}});const i=n(75);Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return i.DispatcherWrapper}});const o=n(76);Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return o.EventListBase}});const c=n(77);Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return c.EventManagement}});const a=n(78);Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return a.HandlingBase}});const u=n(79);Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return u.PromiseDispatcherBase}});const p=n(80);Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return p.PromiseSubscription}});const h=n(81);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return h.Subscription}});const l=n(82);Object.defineProperty(t,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return l.SubscriptionChangeEventDispatcher}})},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0;const s=n(86);Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}});const r=n(87);Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return r.DispatchError}});const i=n(88);Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return i.DispatcherWrapper}});const o=n(89);Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return o.EventListBase}});const c=n(90);Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return c.EventManagement}});const a=n(91);Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return a.HandlingBase}});const u=n(92);Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return u.PromiseDispatcherBase}});const p=n(93);Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return p.PromiseSubscription}});const h=n(94);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return h.Subscription}});const l=n(95);Object.defineProperty(t,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return l.SubscriptionChangeEventDispatcher}})},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0;const s=n(102);Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}});const r=n(103);Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return r.DispatchError}});const i=n(104);Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return i.DispatcherWrapper}});const o=n(105);Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return o.EventListBase}});const c=n(106);Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return c.EventManagement}});const a=n(107);Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return a.HandlingBase}});const u=n(108);Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return u.PromiseDispatcherBase}});const p=n(109);Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return p.PromiseSubscription}});const h=n(110);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return h.Subscription}});const l=n(111);Object.defineProperty(t,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return l.SubscriptionChangeEventDispatcher}})},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0;const s=n(115);Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}});const r=n(116);Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return r.DispatchError}});const i=n(117);Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return i.DispatcherWrapper}});const o=n(118);Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return o.EventListBase}});const c=n(119);Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return c.EventManagement}});const a=n(120);Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return a.HandlingBase}});const u=n(121);Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return u.PromiseDispatcherBase}});const p=n(122);Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return p.PromiseSubscription}});const h=n(123);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return h.Subscription}});const l=n(124);Object.defineProperty(t,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return l.SubscriptionChangeEventDispatcher}})},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0;const s=n(128);Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}});const r=n(129);Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return r.DispatchError}});const i=n(130);Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return i.DispatcherWrapper}});const o=n(131);Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return o.EventListBase}});const c=n(132);Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return c.EventManagement}});const a=n(133);Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return a.HandlingBase}});const u=n(134);Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return u.PromiseDispatcherBase}});const p=n(135);Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return p.PromiseSubscription}});const h=n(136);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return h.Subscription}});const l=n(137);Object.defineProperty(t,"SubscriptionChangeEventDispatcher",{enumerable:!0,get:function(){return l.SubscriptionChangeEventDispatcher}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s{static fromCart(e,t){const n=new s;return n.line_items=e.lineItems.map(e=>{var n,s,r,i,o;return{productId:e.productId,key:t(e),quantity:e.quantity,group:null===(n=e.props)||void 0===n?void 0:n._group,userId:null===(s=e.props)||void 0===s?void 0:s._userId,stateId:null===(r=e.props)||void 0===r?void 0:r._stateId,hidden:null===(i=e.props)||void 0===i?void 0:i._hidden,fields:null===(o=e.props)||void 0===o?void 0:o._fields,properties:e.props}}),n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;const s=n(43);class r extends s.DispatcherBase{constructor(){super()}dispatch(e,t){const n=this._dispatch(!1,this,arguments);if(null==n)throw new s.DispatchError("Got `null` back from dispatch.");return n}dispatchAsync(e,t){this._dispatch(!0,this,arguments)}asEvent(){return super.asEvent()}}t.EventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventDispatcher=void 0;const s=n(44);class r extends s.DispatcherBase{constructor(){super()}dispatch(e){const t=this._dispatch(!1,this,arguments);if(null==t)throw new s.DispatchError("Got `null` back from dispatch.");return t}dispatchAsync(e){this._dispatch(!0,this,arguments)}asEvent(){return super.asEvent()}}t.SimpleEventDispatcher=r},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Promise Signals
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SignalList=t.SignalHandlingBase=t.SignalDispatcher=void 0;const s=n(98);Object.defineProperty(t,"SignalDispatcher",{enumerable:!0,get:function(){return s.SignalDispatcher}});const r=n(99);Object.defineProperty(t,"SignalHandlingBase",{enumerable:!0,get:function(){return r.SignalHandlingBase}});const i=n(100);Object.defineProperty(t,"SignalList",{enumerable:!0,get:function(){return i.SignalList}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseEventDispatcher=void 0;const s=n(45);class r extends s.PromiseDispatcherBase{constructor(){super()}async dispatch(e,t){const n=await this._dispatchAsPromise(!1,this,arguments);if(null==n)throw new s.DispatchError("Got `null` back from dispatch.");return n}dispatchAsync(e,t){this._dispatchAsPromise(!0,this,arguments)}asEvent(){return super.asEvent()}}t.PromiseEventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSimpleEventDispatcher=void 0;const s=n(47);class r extends s.PromiseDispatcherBase{constructor(){super()}async dispatch(e){const t=await this._dispatchAsPromise(!1,this,arguments);if(null==t)throw new s.DispatchError("Got `null` back from dispatch.");return t}dispatchAsync(e){this._dispatchAsPromise(!0,this,arguments)}asEvent(){return super.asEvent()}}t.PromiseSimpleEventDispatcher=r},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseSimpleEventList=t.PromiseSimpleEventList=t.PromiseSimpleEventHandlingBase=t.PromiseSimpleEventDispatcher=t.PromiseSignalList=t.PromiseSignalHandlingBase=t.PromiseSignalDispatcher=t.NonUniformPromiseEventList=t.PromiseEventList=t.PromiseEventHandlingBase=t.PromiseEventDispatcher=t.SignalList=t.SignalHandlingBase=t.SignalDispatcher=t.NonUniformSimpleEventList=t.SimpleEventList=t.SimpleEventHandlingBase=t.SimpleEventDispatcher=t.NonUniformEventList=t.EventList=t.EventHandlingBase=t.EventDispatcher=t.HandlingBase=t.PromiseDispatcherBase=t.PromiseSubscription=t.DispatchError=t.EventManagement=t.EventListBase=t.DispatcherWrapper=t.DispatcherBase=t.Subscription=void 0;var s=n(42);Object.defineProperty(t,"Subscription",{enumerable:!0,get:function(){return s.Subscription}}),Object.defineProperty(t,"DispatcherBase",{enumerable:!0,get:function(){return s.DispatcherBase}}),Object.defineProperty(t,"DispatcherWrapper",{enumerable:!0,get:function(){return s.DispatcherWrapper}}),Object.defineProperty(t,"EventListBase",{enumerable:!0,get:function(){return s.EventListBase}}),Object.defineProperty(t,"EventManagement",{enumerable:!0,get:function(){return s.EventManagement}}),Object.defineProperty(t,"DispatchError",{enumerable:!0,get:function(){return s.DispatchError}}),Object.defineProperty(t,"PromiseSubscription",{enumerable:!0,get:function(){return s.PromiseSubscription}}),Object.defineProperty(t,"PromiseDispatcherBase",{enumerable:!0,get:function(){return s.PromiseDispatcherBase}}),Object.defineProperty(t,"HandlingBase",{enumerable:!0,get:function(){return s.HandlingBase}});var r=n(72);Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return r.EventDispatcher}}),Object.defineProperty(t,"EventHandlingBase",{enumerable:!0,get:function(){return r.EventHandlingBase}}),Object.defineProperty(t,"EventList",{enumerable:!0,get:function(){return r.EventList}}),Object.defineProperty(t,"NonUniformEventList",{enumerable:!0,get:function(){return r.NonUniformEventList}});var i=n(85);Object.defineProperty(t,"SimpleEventDispatcher",{enumerable:!0,get:function(){return i.SimpleEventDispatcher}}),Object.defineProperty(t,"SimpleEventHandlingBase",{enumerable:!0,get:function(){return i.SimpleEventHandlingBase}}),Object.defineProperty(t,"SimpleEventList",{enumerable:!0,get:function(){return i.SimpleEventList}}),Object.defineProperty(t,"NonUniformSimpleEventList",{enumerable:!0,get:function(){return i.NonUniformSimpleEventList}});var o=n(51);Object.defineProperty(t,"SignalDispatcher",{enumerable:!0,get:function(){return o.SignalDispatcher}}),Object.defineProperty(t,"SignalHandlingBase",{enumerable:!0,get:function(){return o.SignalHandlingBase}}),Object.defineProperty(t,"SignalList",{enumerable:!0,get:function(){return o.SignalList}});var c=n(101);Object.defineProperty(t,"PromiseEventDispatcher",{enumerable:!0,get:function(){return c.PromiseEventDispatcher}}),Object.defineProperty(t,"PromiseEventHandlingBase",{enumerable:!0,get:function(){return c.PromiseEventHandlingBase}}),Object.defineProperty(t,"PromiseEventList",{enumerable:!0,get:function(){return c.PromiseEventList}}),Object.defineProperty(t,"NonUniformPromiseEventList",{enumerable:!0,get:function(){return c.NonUniformPromiseEventList}});var a=n(58);Object.defineProperty(t,"PromiseSignalDispatcher",{enumerable:!0,get:function(){return a.PromiseSignalDispatcher}}),Object.defineProperty(t,"PromiseSignalHandlingBase",{enumerable:!0,get:function(){return a.PromiseSignalHandlingBase}}),Object.defineProperty(t,"PromiseSignalList",{enumerable:!0,get:function(){return a.PromiseSignalList}});var u=n(126);Object.defineProperty(t,"PromiseSimpleEventDispatcher",{enumerable:!0,get:function(){return u.PromiseSimpleEventDispatcher}}),Object.defineProperty(t,"PromiseSimpleEventHandlingBase",{enumerable:!0,get:function(){return u.PromiseSimpleEventHandlingBase}}),Object.defineProperty(t,"PromiseSimpleEventList",{enumerable:!0,get:function(){return u.PromiseSimpleEventList}}),Object.defineProperty(t,"NonUniformPromiseSimpleEventList",{enumerable:!0,get:function(){return u.NonUniformPromiseSimpleEventList}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventList=void 0;const s=n(43),r=n(49);class i extends s.EventListBase{constructor(){super()}createDispatcher(){return new r.EventDispatcher}}t.EventList=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventList=void 0;const s=n(44),r=n(50);class i extends s.EventListBase{constructor(){super()}createDispatcher(){return new r.SimpleEventDispatcher}}t.SimpleEventList=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseEventList=void 0;const s=n(45),r=n(52);class i extends s.EventListBase{constructor(){super()}createDispatcher(){return new r.PromiseEventDispatcher}}t.PromiseEventList=i},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Promise Signals
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalList=t.PromiseSignalHandlingBase=t.PromiseSignalDispatcher=void 0;const s=n(114);Object.defineProperty(t,"PromiseSignalDispatcher",{enumerable:!0,get:function(){return s.PromiseSignalDispatcher}});const r=n(125);Object.defineProperty(t,"PromiseSignalHandlingBase",{enumerable:!0,get:function(){return r.PromiseSignalHandlingBase}});const i=n(59);Object.defineProperty(t,"PromiseSignalList",{enumerable:!0,get:function(){return i.PromiseSignalList}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalList=void 0;const s=n(46),r=n(58);class i extends s.EventListBase{constructor(){super()}createDispatcher(){return new r.PromiseSignalDispatcher}}t.PromiseSignalList=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSimpleEventList=void 0;const s=n(47),r=n(53);class i extends s.EventListBase{constructor(){super()}createDispatcher(){return new r.PromiseSimpleEventDispatcher}}t.PromiseSimpleEventList=i},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherBase=void 0;const s=n(42);t.DispatcherBase=class{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return null==this._onSubscriptionChange&&(this._onSubscriptionChange=new s.SubscriptionChangeEventDispatcher),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return!!e&&this._subscriptions.some(t=>t.handler==e)}unsubscribe(e){if(!e)return;let t=!1;for(let n=0;n<this._subscriptions.length;n++)if(this._subscriptions[n].handler==e){this._subscriptions.splice(n,1),t=!0;break}t&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);if(o.push(i),r.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,t){return new s.Subscription(e,t)}cleanup(e){let t=!1;if(e.isOnce&&e.isExecuted){let n=this._subscriptions.indexOf(e);n>-1&&(this._subscriptions.splice(n,1),t=!0)}t&&this.triggerSubscriptionChange()}asEvent(){return null==this._wrap&&(this._wrap=new s.DispatcherWrapper(this)),this._wrap}clear(){0!=this._subscriptions.length&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){null!=this._onSubscriptionChange&&this._onSubscriptionChange.dispatch(this.count)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatchError=void 0;class s extends Error{constructor(e){super(e)}}t.DispatchError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherWrapper=void 0;t.DispatcherWrapper=class{constructor(e){this._subscribe=t=>e.subscribe(t),this._unsubscribe=t=>e.unsubscribe(t),this._one=t=>e.one(t),this._has=t=>e.has(t),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListBase=void 0;t.EventListBase=class{constructor(){this._events={}}get(e){let t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)}remove(e){delete this._events[e]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManagement=void 0;t.EventManagement=class{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlingBase=void 0;t.HandlingBase=class{constructor(e){this.events=e}one(e,t){this.events.get(e).one(t)}has(e,t){return this.events.get(e).has(t)}subscribe(e,t){this.events.get(e).subscribe(t)}sub(e,t){this.subscribe(e,t)}unsubscribe(e,t){this.events.get(e).unsubscribe(t)}unsub(e,t){this.unsubscribe(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDispatcherBase=void 0;const s=n(42);class r extends s.DispatcherBase{_dispatch(e,t,n){throw new s.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,t){return new s.PromiseSubscription(e,t)}async _dispatchAsPromise(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);o.push(i);let c=r;if(await c.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}t.PromiseDispatcherBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSubscription=void 0;t.PromiseSubscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}async execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;if(e)return void setTimeout(()=>{s.apply(t,n)},1);let r=s.apply(t,n);await r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscription=void 0;t.Subscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;e?setTimeout(()=>{s.apply(t,n)},1):s.apply(t,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=void 0;const s=n(42);class r extends s.DispatcherBase{dispatch(e){this._dispatch(!1,this,arguments)}}t.SubscriptionChangeEventDispatcher=r},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformEventList=t.EventList=t.EventHandlingBase=t.EventDispatcher=void 0;const s=n(49);Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return s.EventDispatcher}});const r=n(83);Object.defineProperty(t,"EventHandlingBase",{enumerable:!0,get:function(){return r.EventHandlingBase}});const i=n(55);Object.defineProperty(t,"EventList",{enumerable:!0,get:function(){return i.EventList}});const o=n(84);Object.defineProperty(t,"NonUniformEventList",{enumerable:!0,get:function(){return o.NonUniformEventList}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherBase=void 0;const s=n(43);t.DispatcherBase=class{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return null==this._onSubscriptionChange&&(this._onSubscriptionChange=new s.SubscriptionChangeEventDispatcher),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return!!e&&this._subscriptions.some(t=>t.handler==e)}unsubscribe(e){if(!e)return;let t=!1;for(let n=0;n<this._subscriptions.length;n++)if(this._subscriptions[n].handler==e){this._subscriptions.splice(n,1),t=!0;break}t&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);if(o.push(i),r.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,t){return new s.Subscription(e,t)}cleanup(e){let t=!1;if(e.isOnce&&e.isExecuted){let n=this._subscriptions.indexOf(e);n>-1&&(this._subscriptions.splice(n,1),t=!0)}t&&this.triggerSubscriptionChange()}asEvent(){return null==this._wrap&&(this._wrap=new s.DispatcherWrapper(this)),this._wrap}clear(){0!=this._subscriptions.length&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){null!=this._onSubscriptionChange&&this._onSubscriptionChange.dispatch(this.count)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatchError=void 0;class s extends Error{constructor(e){super(e)}}t.DispatchError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherWrapper=void 0;t.DispatcherWrapper=class{constructor(e){this._subscribe=t=>e.subscribe(t),this._unsubscribe=t=>e.unsubscribe(t),this._one=t=>e.one(t),this._has=t=>e.has(t),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListBase=void 0;t.EventListBase=class{constructor(){this._events={}}get(e){let t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)}remove(e){delete this._events[e]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManagement=void 0;t.EventManagement=class{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlingBase=void 0;t.HandlingBase=class{constructor(e){this.events=e}one(e,t){this.events.get(e).one(t)}has(e,t){return this.events.get(e).has(t)}subscribe(e,t){this.events.get(e).subscribe(t)}sub(e,t){this.subscribe(e,t)}unsubscribe(e,t){this.events.get(e).unsubscribe(t)}unsub(e,t){this.unsubscribe(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDispatcherBase=void 0;const s=n(43);class r extends s.DispatcherBase{_dispatch(e,t,n){throw new s.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,t){return new s.PromiseSubscription(e,t)}async _dispatchAsPromise(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);o.push(i);let c=r;if(await c.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}t.PromiseDispatcherBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSubscription=void 0;t.PromiseSubscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}async execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;if(e)return void setTimeout(()=>{s.apply(t,n)},1);let r=s.apply(t,n);await r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscription=void 0;t.Subscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;e?setTimeout(()=>{s.apply(t,n)},1):s.apply(t,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=void 0;const s=n(43);class r extends s.DispatcherBase{dispatch(e){this._dispatch(!1,this,arguments)}}t.SubscriptionChangeEventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandlingBase=void 0;const s=n(43),r=n(55);class i extends s.HandlingBase{constructor(){super(new r.EventList)}}t.EventHandlingBase=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformEventList=void 0;const s=n(49);t.NonUniformEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new s.EventDispatcher}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformSimpleEventList=t.SimpleEventList=t.SimpleEventHandlingBase=t.SimpleEventDispatcher=void 0;const s=n(50);Object.defineProperty(t,"SimpleEventDispatcher",{enumerable:!0,get:function(){return s.SimpleEventDispatcher}});const r=n(96);Object.defineProperty(t,"SimpleEventHandlingBase",{enumerable:!0,get:function(){return r.SimpleEventHandlingBase}});const i=n(97);Object.defineProperty(t,"NonUniformSimpleEventList",{enumerable:!0,get:function(){return i.NonUniformSimpleEventList}});const o=n(56);Object.defineProperty(t,"SimpleEventList",{enumerable:!0,get:function(){return o.SimpleEventList}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherBase=void 0;const s=n(44);t.DispatcherBase=class{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return null==this._onSubscriptionChange&&(this._onSubscriptionChange=new s.SubscriptionChangeEventDispatcher),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return!!e&&this._subscriptions.some(t=>t.handler==e)}unsubscribe(e){if(!e)return;let t=!1;for(let n=0;n<this._subscriptions.length;n++)if(this._subscriptions[n].handler==e){this._subscriptions.splice(n,1),t=!0;break}t&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);if(o.push(i),r.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,t){return new s.Subscription(e,t)}cleanup(e){let t=!1;if(e.isOnce&&e.isExecuted){let n=this._subscriptions.indexOf(e);n>-1&&(this._subscriptions.splice(n,1),t=!0)}t&&this.triggerSubscriptionChange()}asEvent(){return null==this._wrap&&(this._wrap=new s.DispatcherWrapper(this)),this._wrap}clear(){0!=this._subscriptions.length&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){null!=this._onSubscriptionChange&&this._onSubscriptionChange.dispatch(this.count)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatchError=void 0;class s extends Error{constructor(e){super(e)}}t.DispatchError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherWrapper=void 0;t.DispatcherWrapper=class{constructor(e){this._subscribe=t=>e.subscribe(t),this._unsubscribe=t=>e.unsubscribe(t),this._one=t=>e.one(t),this._has=t=>e.has(t),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListBase=void 0;t.EventListBase=class{constructor(){this._events={}}get(e){let t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)}remove(e){delete this._events[e]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManagement=void 0;t.EventManagement=class{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlingBase=void 0;t.HandlingBase=class{constructor(e){this.events=e}one(e,t){this.events.get(e).one(t)}has(e,t){return this.events.get(e).has(t)}subscribe(e,t){this.events.get(e).subscribe(t)}sub(e,t){this.subscribe(e,t)}unsubscribe(e,t){this.events.get(e).unsubscribe(t)}unsub(e,t){this.unsubscribe(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDispatcherBase=void 0;const s=n(44);class r extends s.DispatcherBase{_dispatch(e,t,n){throw new s.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,t){return new s.PromiseSubscription(e,t)}async _dispatchAsPromise(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);o.push(i);let c=r;if(await c.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}t.PromiseDispatcherBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSubscription=void 0;t.PromiseSubscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}async execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;if(e)return void setTimeout(()=>{s.apply(t,n)},1);let r=s.apply(t,n);await r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscription=void 0;t.Subscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;e?setTimeout(()=>{s.apply(t,n)},1):s.apply(t,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=void 0;const s=n(44);class r extends s.DispatcherBase{dispatch(e){this._dispatch(!1,this,arguments)}}t.SubscriptionChangeEventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleEventHandlingBase=void 0;const s=n(44),r=n(56);class i extends s.HandlingBase{constructor(){super(new r.SimpleEventList)}}t.SimpleEventHandlingBase=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformSimpleEventList=void 0;const s=n(50);t.NonUniformSimpleEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new s.SimpleEventDispatcher}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignalDispatcher=void 0;const s=n(42);class r extends s.DispatcherBase{dispatch(){const e=this._dispatch(!1,this,arguments);if(null==e)throw new s.DispatchError("Got `null` back from dispatch.");return e}dispatchAsync(){this._dispatch(!0,this,arguments)}asEvent(){return super.asEvent()}}t.SignalDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignalHandlingBase=void 0;const s=n(42),r=n(51);class i extends s.HandlingBase{constructor(){super(new r.SignalList)}}t.SignalHandlingBase=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignalList=void 0;const s=n(42),r=n(51);class i extends s.EventListBase{constructor(){super()}createDispatcher(){return new r.SignalDispatcher}}t.SignalList=i},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseEventList=t.PromiseEventList=t.PromiseEventHandlingBase=t.PromiseEventDispatcher=void 0;const s=n(52);Object.defineProperty(t,"PromiseEventDispatcher",{enumerable:!0,get:function(){return s.PromiseEventDispatcher}});const r=n(112);Object.defineProperty(t,"PromiseEventHandlingBase",{enumerable:!0,get:function(){return r.PromiseEventHandlingBase}});const i=n(57);Object.defineProperty(t,"PromiseEventList",{enumerable:!0,get:function(){return i.PromiseEventList}});const o=n(113);Object.defineProperty(t,"NonUniformPromiseEventList",{enumerable:!0,get:function(){return o.NonUniformPromiseEventList}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherBase=void 0;const s=n(45);t.DispatcherBase=class{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return null==this._onSubscriptionChange&&(this._onSubscriptionChange=new s.SubscriptionChangeEventDispatcher),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return!!e&&this._subscriptions.some(t=>t.handler==e)}unsubscribe(e){if(!e)return;let t=!1;for(let n=0;n<this._subscriptions.length;n++)if(this._subscriptions[n].handler==e){this._subscriptions.splice(n,1),t=!0;break}t&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);if(o.push(i),r.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,t){return new s.Subscription(e,t)}cleanup(e){let t=!1;if(e.isOnce&&e.isExecuted){let n=this._subscriptions.indexOf(e);n>-1&&(this._subscriptions.splice(n,1),t=!0)}t&&this.triggerSubscriptionChange()}asEvent(){return null==this._wrap&&(this._wrap=new s.DispatcherWrapper(this)),this._wrap}clear(){0!=this._subscriptions.length&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){null!=this._onSubscriptionChange&&this._onSubscriptionChange.dispatch(this.count)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatchError=void 0;class s extends Error{constructor(e){super(e)}}t.DispatchError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherWrapper=void 0;t.DispatcherWrapper=class{constructor(e){this._subscribe=t=>e.subscribe(t),this._unsubscribe=t=>e.unsubscribe(t),this._one=t=>e.one(t),this._has=t=>e.has(t),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListBase=void 0;t.EventListBase=class{constructor(){this._events={}}get(e){let t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)}remove(e){delete this._events[e]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManagement=void 0;t.EventManagement=class{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlingBase=void 0;t.HandlingBase=class{constructor(e){this.events=e}one(e,t){this.events.get(e).one(t)}has(e,t){return this.events.get(e).has(t)}subscribe(e,t){this.events.get(e).subscribe(t)}sub(e,t){this.subscribe(e,t)}unsubscribe(e,t){this.events.get(e).unsubscribe(t)}unsub(e,t){this.unsubscribe(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDispatcherBase=void 0;const s=n(45);class r extends s.DispatcherBase{_dispatch(e,t,n){throw new s.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,t){return new s.PromiseSubscription(e,t)}async _dispatchAsPromise(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);o.push(i);let c=r;if(await c.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}t.PromiseDispatcherBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSubscription=void 0;t.PromiseSubscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}async execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;if(e)return void setTimeout(()=>{s.apply(t,n)},1);let r=s.apply(t,n);await r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscription=void 0;t.Subscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;e?setTimeout(()=>{s.apply(t,n)},1):s.apply(t,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=void 0;const s=n(45);class r extends s.DispatcherBase{dispatch(e){this._dispatch(!1,this,arguments)}}t.SubscriptionChangeEventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseEventHandlingBase=void 0;const s=n(45),r=n(57);class i extends s.HandlingBase{constructor(){super(new r.PromiseEventList)}}t.PromiseEventHandlingBase=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseEventList=void 0;const s=n(52);t.NonUniformPromiseEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new s.PromiseEventDispatcher}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalDispatcher=void 0;const s=n(46);class r extends s.PromiseDispatcherBase{constructor(){super()}async dispatch(){const e=await this._dispatchAsPromise(!1,this,arguments);if(null==e)throw new s.DispatchError("Got `null` back from dispatch.");return e}dispatchAsync(){this._dispatchAsPromise(!0,this,arguments)}asEvent(){return super.asEvent()}}t.PromiseSignalDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherBase=void 0;const s=n(46);t.DispatcherBase=class{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return null==this._onSubscriptionChange&&(this._onSubscriptionChange=new s.SubscriptionChangeEventDispatcher),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return!!e&&this._subscriptions.some(t=>t.handler==e)}unsubscribe(e){if(!e)return;let t=!1;for(let n=0;n<this._subscriptions.length;n++)if(this._subscriptions[n].handler==e){this._subscriptions.splice(n,1),t=!0;break}t&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);if(o.push(i),r.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,t){return new s.Subscription(e,t)}cleanup(e){let t=!1;if(e.isOnce&&e.isExecuted){let n=this._subscriptions.indexOf(e);n>-1&&(this._subscriptions.splice(n,1),t=!0)}t&&this.triggerSubscriptionChange()}asEvent(){return null==this._wrap&&(this._wrap=new s.DispatcherWrapper(this)),this._wrap}clear(){0!=this._subscriptions.length&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){null!=this._onSubscriptionChange&&this._onSubscriptionChange.dispatch(this.count)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatchError=void 0;class s extends Error{constructor(e){super(e)}}t.DispatchError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherWrapper=void 0;t.DispatcherWrapper=class{constructor(e){this._subscribe=t=>e.subscribe(t),this._unsubscribe=t=>e.unsubscribe(t),this._one=t=>e.one(t),this._has=t=>e.has(t),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListBase=void 0;t.EventListBase=class{constructor(){this._events={}}get(e){let t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)}remove(e){delete this._events[e]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManagement=void 0;t.EventManagement=class{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlingBase=void 0;t.HandlingBase=class{constructor(e){this.events=e}one(e,t){this.events.get(e).one(t)}has(e,t){return this.events.get(e).has(t)}subscribe(e,t){this.events.get(e).subscribe(t)}sub(e,t){this.subscribe(e,t)}unsubscribe(e,t){this.events.get(e).unsubscribe(t)}unsub(e,t){this.unsubscribe(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDispatcherBase=void 0;const s=n(46);class r extends s.DispatcherBase{_dispatch(e,t,n){throw new s.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,t){return new s.PromiseSubscription(e,t)}async _dispatchAsPromise(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);o.push(i);let c=r;if(await c.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}t.PromiseDispatcherBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSubscription=void 0;t.PromiseSubscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}async execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;if(e)return void setTimeout(()=>{s.apply(t,n)},1);let r=s.apply(t,n);await r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscription=void 0;t.Subscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;e?setTimeout(()=>{s.apply(t,n)},1):s.apply(t,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=void 0;const s=n(46);class r extends s.DispatcherBase{dispatch(e){this._dispatch(!1,this,arguments)}}t.SubscriptionChangeEventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSignalHandlingBase=void 0;const s=n(46),r=n(59);class i extends s.HandlingBase{constructor(){super(new r.PromiseSignalList)}}t.PromiseSignalHandlingBase=i},function(e,t,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseSimpleEventList=t.PromiseSimpleEventList=t.PromiseSimpleEventHandlingBase=t.PromiseSimpleEventDispatcher=void 0;const s=n(127);Object.defineProperty(t,"NonUniformPromiseSimpleEventList",{enumerable:!0,get:function(){return s.NonUniformPromiseSimpleEventList}});const r=n(53);Object.defineProperty(t,"PromiseSimpleEventDispatcher",{enumerable:!0,get:function(){return r.PromiseSimpleEventDispatcher}});const i=n(138);Object.defineProperty(t,"PromiseSimpleEventHandlingBase",{enumerable:!0,get:function(){return i.PromiseSimpleEventHandlingBase}});const o=n(60);Object.defineProperty(t,"PromiseSimpleEventList",{enumerable:!0,get:function(){return o.PromiseSimpleEventList}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonUniformPromiseSimpleEventList=void 0;const s=n(53);t.NonUniformPromiseSimpleEventList=class{constructor(){this._events={}}get(e){if(this._events[e])return this._events[e];const t=this.createDispatcher();return this._events[e]=t,t}remove(e){delete this._events[e]}createDispatcher(){return new s.PromiseSimpleEventDispatcher}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherBase=void 0;const s=n(47);t.DispatcherBase=class{constructor(){this._subscriptions=new Array}get count(){return this._subscriptions.length}get onSubscriptionChange(){return null==this._onSubscriptionChange&&(this._onSubscriptionChange=new s.SubscriptionChangeEventDispatcher),this._onSubscriptionChange.asEvent()}subscribe(e){return e&&(this._subscriptions.push(this.createSubscription(e,!1)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}sub(e){return this.subscribe(e)}one(e){return e&&(this._subscriptions.push(this.createSubscription(e,!0)),this.triggerSubscriptionChange()),()=>{this.unsubscribe(e)}}has(e){return!!e&&this._subscriptions.some(t=>t.handler==e)}unsubscribe(e){if(!e)return;let t=!1;for(let n=0;n<this._subscriptions.length;n++)if(this._subscriptions[n].handler==e){this._subscriptions.splice(n,1),t=!0;break}t&&this.triggerSubscriptionChange()}unsub(e){this.unsubscribe(e)}_dispatch(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);if(o.push(i),r.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}createSubscription(e,t){return new s.Subscription(e,t)}cleanup(e){let t=!1;if(e.isOnce&&e.isExecuted){let n=this._subscriptions.indexOf(e);n>-1&&(this._subscriptions.splice(n,1),t=!0)}t&&this.triggerSubscriptionChange()}asEvent(){return null==this._wrap&&(this._wrap=new s.DispatcherWrapper(this)),this._wrap}clear(){0!=this._subscriptions.length&&(this._subscriptions.splice(0,this._subscriptions.length),this.triggerSubscriptionChange())}triggerSubscriptionChange(){null!=this._onSubscriptionChange&&this._onSubscriptionChange.dispatch(this.count)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatchError=void 0;class s extends Error{constructor(e){super(e)}}t.DispatchError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherWrapper=void 0;t.DispatcherWrapper=class{constructor(e){this._subscribe=t=>e.subscribe(t),this._unsubscribe=t=>e.unsubscribe(t),this._one=t=>e.one(t),this._has=t=>e.has(t),this._clear=()=>e.clear(),this._count=()=>e.count,this._onSubscriptionChange=()=>e.onSubscriptionChange}get onSubscriptionChange(){return this._onSubscriptionChange()}get count(){return this._count()}subscribe(e){return this._subscribe(e)}sub(e){return this.subscribe(e)}unsubscribe(e){this._unsubscribe(e)}unsub(e){this.unsubscribe(e)}one(e){return this._one(e)}has(e){return this._has(e)}clear(){this._clear()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListBase=void 0;t.EventListBase=class{constructor(){this._events={}}get(e){let t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)}remove(e){delete this._events[e]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventManagement=void 0;t.EventManagement=class{constructor(e){this.unsub=e,this.propagationStopped=!1}stopPropagation(){this.propagationStopped=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlingBase=void 0;t.HandlingBase=class{constructor(e){this.events=e}one(e,t){this.events.get(e).one(t)}has(e,t){return this.events.get(e).has(t)}subscribe(e,t){this.events.get(e).subscribe(t)}sub(e,t){this.subscribe(e,t)}unsubscribe(e,t){this.events.get(e).unsubscribe(t)}unsub(e,t){this.unsubscribe(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseDispatcherBase=void 0;const s=n(47);class r extends s.DispatcherBase{_dispatch(e,t,n){throw new s.DispatchError("_dispatch not supported. Use _dispatchAsPromise.")}createSubscription(e,t){return new s.PromiseSubscription(e,t)}async _dispatchAsPromise(e,t,n){for(let r of[...this._subscriptions]){let i=new s.EventManagement(()=>this.unsub(r.handler)),o=Array.prototype.slice.call(n);o.push(i);let c=r;if(await c.execute(e,t,o),this.cleanup(r),!e&&i.propagationStopped)return{propagationStopped:!0}}return e?null:{propagationStopped:!1}}}t.PromiseDispatcherBase=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSubscription=void 0;t.PromiseSubscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}async execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;if(e)return void setTimeout(()=>{s.apply(t,n)},1);let r=s.apply(t,n);await r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscription=void 0;t.Subscription=class{constructor(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}execute(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var s=this.handler;e?setTimeout(()=>{s.apply(t,n)},1):s.apply(t,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionChangeEventDispatcher=void 0;const s=n(47);class r extends s.DispatcherBase{dispatch(e){this._dispatch(!1,this,arguments)}}t.SubscriptionChangeEventDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseSimpleEventHandlingBase=void 0;const s=n(47),r=n(60);class i extends s.HandlingBase{constructor(){super(new r.PromiseSimpleEventList)}}t.PromiseSimpleEventHandlingBase=i},,function(e,t,n){"use strict";n.r(t);var s=n(2),r=n(6);class i{constructor(e){this._apiClient=e}async findById(e){const t=await this._apiClient.getTemplateIntegrationInfo(e);return t.externalProductId="",t}async findByProduct(e){const t=await this._apiClient.getIntegrationInfo(e);return t.externalProductId=e,t}}var o=n(15);var c=n(4);async function a(e){const t=[{importData:"editor",url:e.uiFrameworkUrl+"/editor.js",isDefault:!0},{importData:"ecommerceDriver",url:u(e)}],n=await Object(c.a)(t);return{editor:n[0].editor,driver:n[1].ecommerceDriver}}function u(e){switch(e.configFamily){case s.a.SimpleEditor:return e.simpleEditorUrl+p(e.ecommerceSystemType);case s.a.UIFramework:return e.uiFrameworkUrl+p(e.ecommerceSystemType);default:throw new Error("Failed to recognize config family: "+e.configFamily)}}function p(e){switch(e){case s.b.ShopifyLegacy:return"/drivers/shopify-driver.js";case s.b.NopCommerce:return"/drivers/nopcommerce-driver.js";case s.b.WooCommerce:return"/drivers/woocommerce-driver.js";case s.b.Magento:return"/drivers/magento-driver.js";case s.b.BigCommerce:return"/drivers/bigcommerce-driver.js";case s.b.Shopify:return"/drivers/shopify-driver.js";default:return"/drivers/default-driver.js"}}class h{constructor(e){this._apiClient=e}async getBackOfficeCredentials(e,t){return await this._apiClient.getTokenAndUserId(e,t)}async getEditorToken(e,t){return await this._apiClient.getCcToken(e,t)}async updateEditorToken(e){return await this._apiClient.updateCcToken(e)}}var l=n(48),d=n(41);n(16);class b{constructor(){this.useProjectBuffer=!0}}var f=n(54);class g extends f.EventDispatcher{constructor(){super(...arguments),this.callbacks=new Array}subscribe(e){return e&&this.callbacks.push(new f.Subscription(e,!1)),()=>{this.unsubscribe(e)}}unsubscribe(e){if(e)for(let t=0;t<this.callbacks.length;t++)if(this.callbacks[t].handler===e){this.callbacks.splice(t,1);break}}dispatch(e,t){const n=this.callbacks.map(n=>this.executeCallback(n,e,t));return Promise.all(n).then(()=>{})}executeCallback(e,t,n){const s=e.handler.apply(this,[t,n]);return this.isPromise(s)?s:Promise.resolve()}isPromise(e){return!!e&&"function"==typeof e.then}}class m{constructor(e){this._apiClient=e}async findByVersionId(e,t){const n=await this._apiClient.getOptionBasedProductIntegrationInfo(e,t);return n.externalProductId="",n}async findByProduct(e){const t=await this._apiClient.getIntegrationInfo(e);return t.externalProductId=e,t}}class v{constructor(){this.options=new b}}class _{}class S{constructor(e){var t,n;this._onEditorFinish=new g,this.createBogusProduct=()=>({id:0,Id:0,sku:"PRODUCT-001",title:"Test Product",description:"This is a test product.",options:[],price:1,attributes:[],variants:[{id:1,optionNames:[]}]}),this.options=e,this._apiClient=new r.a(e.tenantId,null!==(t=e.backOfficeUrl)&&void 0!==t?t:"https://customerscanvashub.com/",null!==(n=e.ecommerceSystemId)&&void 0!==n?n:0),this.templateService=new i(this._apiClient),this.optionBasedProductService=new m(this._apiClient),this.userService=new h(this._apiClient)}get onFinish(){return this._onEditorFinish.asEvent()}get templates(){return this.templateService}get optionBasedProducts(){return this.optionBasedProductService}async _prefetchData(e,t){if(this._apps&&this._backOfficeUserData&&this._userToken)return{apps:this._apps,backOfficeUserData:this._backOfficeUserData,userToken:this._userToken};const[n,s,r]=await Promise.all([a(e),this.userService.getBackOfficeCredentials(t.id,window.location.origin),this.userService.getEditorToken(t.id,window.location.origin)]);return this._apps=n,this._backOfficeUserData=s,this._userToken=r,{apps:n,backOfficeUserData:s,userToken:r}}async preload(e,t){const{apps:n,backOfficeUserData:s,userToken:r}=await this._prefetchData(e,t);await n.editor.preload({designEditorUrl:e.customerCanvasUrl})}async loadEditor(e,t,n,s,r){const i=await this.prepareEditor(t,n,s,r);return window.Aurigma=Object.assign(window.Aurigma||{},{driver:i.driver}),await this.renderEditor(i.driver,e)}async prepareEditor(e,t,n,r){var i,o,c,a;null!=n||(n=this.createBogusProduct());const{apps:u,backOfficeUserData:p,userToken:h}=await this._prefetchData(e,t);let b=this.prepareConfig(e.config);const f=this.getEditorSettings(e,this.options.pluginSettings);f.language&&(b.language=f.language);this.options.ecommerceDomain&&""!=this.options.ecommerceDomain?this.options.ecommerceDomain:window.location.origin;const g=null!==(i=t.token)&&void 0!==i?i:h;setInterval(async()=>{await this._apiClient.updateCcToken(g)},18e5);let m=[];if(b.additionalProducts&&b.additionalProducts.length>0){try{m=await this._apiClient.getAdditionalProducts(this.options.tenantId,window.location.origin,b.additionalProducts)}catch(e){try{m=b.additionalProducts.map(e=>window.Aurigma.Storefront.allProducts.find(t=>t.id==e.id))}catch(e){}}if(0===m.length)try{m=b.additionalProducts.map(e=>window.Aurigma.Storefront.allProducts.find(t=>t.id==e.id))}catch(e){}}return u.driver=await u.driver.init(m.length>0?[n].concat(m):n,u.editor,b,f,r,n.quantity,{id:t.id,tokenId:g,data:t.data},{storefrontId:null!==(o=e.ecommerceSystemId)&&void 0!==o?o:"",apiGatewayUrl:null!==(c=e.apiGatewayUrl)&&void 0!==c?c:"",backOfficeUrl:null!==(a=this.options.backOfficeUrl)&&void 0!==a?a:"https://customerscanvashub.com/",assetProcessorUrl:e.assetProcessorUrl,assetStorageUrl:e.assetStorageUrl,designAtomsApiUrl:e.designAtomsApiUrl,tenantId:this.options.tenantId,userId:p.userId,token:p.token,externalProductId:e.externalProductId,integrationType:e.integrationType}),u.driver.config.vars=u.driver.config.vars||{},u.driver.config.vars.token=p.token,u.driver.config.vars.backOfficeUserId=p.userId,u.driver.config.vars.unitId=this.options.tenantId,e.ecommerceSystemType==s.b.NopCommerce&&(u.driver.settings.useBackOffice=!0,u.driver.orders.forEach(e=>{e.useBackOffice=!0})),e.templateAttributes&&this.putAttributesToDriver(e.templateAttributes.map(e=>({name:e.name,title:e.name,value:e.value})),u.driver),u.driver.cart.onSubmitting.subscribe(async e=>{await this._onEditorFinish.dispatch(this,l.a.fromCart(e,e=>Object(d.a)()))}),u}async renderEditor(e,t){return t.innerHTML="",e.products.current.renderEditor(t,this.options.themeSettings,this.options.localization,!0),new Promise((n,s)=>{t.addEventListener("load",()=>{n(e)})})}putAttributesToDriver(e,t){e.forEach(e=>{try{const t=JSON.parse(e.value);"object"==typeof t&&(e.value=t)}catch(e){}}),t.products.current.attributes.push(...e)}prepareConfig(e){var t,n;let s=JSON.parse(e);s=null!==(t=s.config)&&void 0!==t?t:s;const r=new o.a(document).getLanguage();return null!==(n=s.language)&&void 0!==n||(s.language=r),s}getEditorSettings(e,t){switch(e.ecommerceSystemType){case s.b.ShopifyLegacy:return Object.assign(Object.assign({},t),{editorUrl:e.customerCanvasUrl,customersCanvasBaseUrl:e.customerCanvasUrl,dynamicImageUrl:e.dynamicImageUrl,diUrl:e.dynamicImageUrl,preflightToolUrl:e.preflightUrl,preflightUrl:e.preflightUrl});case s.b.NopCommerce:return Object.assign(Object.assign({},t),{ServerHostUrl:e.customerCanvasUrl,DynamicImageUrl:e.dynamicImageUrl,PreflightToolUrl:e.preflightUrl});case s.b.WooCommerce:return Object.assign(Object.assign({},t),{dynamicImageUrl:e.dynamicImageUrl,preflightToolUrl:e.preflightUrl,customersCanvasBaseUrl:e.customerCanvasUrl});case s.b.Magento:return Object.assign(Object.assign({},t),{dynamicImageUrl:e.dynamicImageUrl,preflightToolUrl:e.preflightUrl,customersCanvasBaseUrl:e.customerCanvasUrl});case s.b.BigCommerce:return Object.assign(Object.assign({},t),{dynamicImageUrl:e.dynamicImageUrl,preflightToolUrl:e.preflightUrl,customersCanvasBaseUrl:e.customerCanvasUrl});case s.b.Shopify:return Object.assign(Object.assign({},t),{editorUrl:e.customerCanvasUrl,customersCanvasBaseUrl:e.customerCanvasUrl,dynamicImageUrl:e.dynamicImageUrl,diUrl:e.dynamicImageUrl,preflightToolUrl:e.preflightUrl,preflightUrl:e.preflightUrl});case s.b.Custom:default:return Object.assign(Object.assign({},t),{customersCanvasUrl:e.customerCanvasUrl,customersCanvasBaseUrl:e.customerCanvasUrl,dynamicImageUrl:e.dynamicImageUrl,preflightToolUrl:e.preflightUrl})}}}n.d(t,"BackOfficeOptions",(function(){return v})),n.d(t,"User",(function(){return _})),n.d(t,"BackOffice",(function(){return S})),window.BackOffice=window.BackOffice||{},window.BackOffice.Storefront=window.BackOffice.Storefront||{},window.BackOffice.Storefront=Object.assign(window.BackOffice.Storefront,{version:"1.2.4"})}]);